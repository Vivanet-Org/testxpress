<section class="appHome">
    <div class="appHeader">
        <p class="appHeading">Project / Applications</p>
        <div class="appTopAlign">
            <label class="appLabel">
                <div class="windowsIconBg">
                    <img class="applicationImg" [src] ="appsImgPath" alt="Application Image" /> 
                </div>
                Applications
            </label>
            <button class="createAppBtn" (click)="openModal()">Create Application</button>
        </div><br><br>
    </div>
    <div class="appData">
        <div class="appDataAlign">
            <label class="appHead">Applications</label>
            <select class="projectsDropdown" (change)="selectedProject($event)" #projectsDropdown>
                <option value= "All Applications">All Applications</option>
                <option *ngFor="let teProjectsName of projectIdName" value={{teProjectsName.projectname}}>
                    {{teProjectsName.projectname}}
                </option>
            </select>
        </div><br>
        <div class="app-grid-container" *ngIf="searchFlag">
            <div *ngFor="let teAppData of appUiData">
                <div class="grid-item" >
                    <div>
                        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
                            integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
                            crossorigin="anonymous" referrerpolicy="no-referrer" />
                        <div class="app-dots">
                            <img class="appMoreImg" [src] ="moreImgPath" alt="more Image" (click)="openAppTaskMenu(teAppData.appid)" />
                            <div class="app-task-menu" *ngIf="teAppData.appid == appTaskMenuId || appTaskMenuFlag">
                                <p class="menuItems menuEdit" (click)="editModal(teAppData.appid)">Edit</p>
                                <p class="menuItems menuDuplicate" (click)="duplicateModal(teAppData.appid)">Duplicate</p>
                                <p class="menuItems menuDelete" (click)="deleteModal(teAppData.appid)">Delete</p>
                            </div>
                        </div>
                        <div class="existingData">
                            <img class="desktopImg" [src] ="desktopImgPath" alt="desktop Image" />
                            <p class="appCardHeading">
                                &nbsp; {{teAppData.appName}}
                            </p>
                            <textarea type="text" name="projectDescription" class="textareaStylesCard"
                            ngModel="{{teAppData.appDescription}}" disabled> </textarea>
                        </div>
                    </div>

                    <div class="girdFooter">
                            <div class="appCardDetails">
                                <label class="appCardDetails">3 Releases &nbsp;&nbsp; 8 Test Plans</label>
                            </div>
                    </div>
                </div>

                <!-- Edit popup start -->
                <div class="edit-app-modal" *ngIf="teAppData.appid === editId && editFlag">
                    <div class="edit-modal-contents">
                
                        <div class="close">
                            <img class="closeEdit" [src] ="closeImgPath" alt="close Image"  (click)="closeEditDuplicateDeletePopup()" />
                        </div>
                        <form #updateApplicationForm="ngForm" (submit)="updateExistingApplication(updateApplicationForm, teAppData.appid)">
                                <label class="editAppHeading">Edit Application</label>
                                <hr class="hrStyleEdd">
                                <div class="form-control">
                                    <label class="popupAppDetails">Application Name</label>
                                    <label *ngIf="uname.errors?.['minlength'] || (updateApplicationForm.controls['appName']?.touched && updateApplicationForm.controls['appName']?.invalid)" class="errorMessage">
                                        Application Name must be at least 1 character long.
                                    </label>
                                    <label *ngIf="uname.errors?.['maxlength']" class="errorMessage">
                                        Application Name maximum of 25 characters only.
                                    </label><br />
                                    <input class="inputStyles" id="name" type="text" name="appName" #uname="ngModel"
                                    required ngModel="{{ teAppData.appName }}" maxlength="25" minlength="1" />
                                </div>
                                <div>
                                    <label class="appDetails">Project Name</label><br>
                                    <select class="createProjectsDropdown" (change)="selected($event)">
                                        <option value="">Select Project</option>
                                        <option *ngFor="let teProjectsName of projectIdName" value={{teProjectsName.projectname}}>
                                            {{teProjectsName.projectname}}
                                        </option>
                                    </select>
                                </div>
                                <div class="control">
                                    <label class="popupAppDetails">Application Description</label><br />
                                    <textarea type="text" name="appDescription" class="textareaStyles" id="Description" 
                                    ngModel="{{ teAppData.appDescription }}" maxlength="150" minlength="1"> </textarea>
                                </div>
                                <hr class="hrStyleEdd">
                                <button class="btnEdit" [disabled]="!updateApplicationForm.valid">Edit</button>
                        </form>
                        <button class="btnClose" (click)="closeEditDuplicateDeletePopup()">Cancel</button>
                    </div>
                </div>
                <!-- Edit popup End -->

                <!-- duplicate popup start -->
                <div class="duplicate-app-modal" *ngIf="teAppData.appid === duplicateId && duplicateFlag">
                    <div class="duplicate-modal-contents">
                
                        <div class="close">
                            <img class="closeDuplicate" [src] ="closeImgPath" alt="close Image"  (click)="closeEditDuplicateDeletePopup()" />
                        </div>
                        <form #duplicateApplicationForm="ngForm" (submit)="duplicateApplication(duplicateApplicationForm, teAppData.appid)">
                                <label class="duplicateAppHeading">Duplicate Application</label>
                                <hr class="hrStyleEdd">
                                <div class="form-control">
                                    <label class="popupAppDetails">Application Name</label>
                                    <label *ngIf="uname.errors?.['minlength'] || (duplicateApplicationForm.controls['appName']?.touched && duplicateApplicationForm.controls['appName']?.invalid)" class="errorMessage">
                                        Application Name must be at least 1 character long.
                                    </label>
                                    <label *ngIf="uname.errors?.['maxlength']" class="errorMessage">
                                        Application Name maximum of 25 characters only.
                                    </label><br />
                                    <input class="inputStyles" id="name" type="text" name="appName" #uname="ngModel"
                                    required ngModel="{{ teAppData.appName }}_copy" maxlength="25" minlength="1" />
                                </div>
                                <div>
                                    <label class="appDetails">Project Name</label><br>
                                    <select class="createProjectsDropdown" (change)="selected($event)">
                                        <option value="">Select Project</option>
                                        <option *ngFor="let teProjectsName of projectIdName" value={{teProjectsName.projectname}}>
                                            {{teProjectsName.projectname}}
                                        </option>
                                    </select>
                                </div>
                                <div class="control">
                                    <label class="popupAppDetails">Application Description</label><br />
                                    <textarea type="text" name="appDescription" class="textareaStyles" id="Description" 
                                    ngModel="{{ teAppData.appDescription }}" maxlength="150" minlength="1"> </textarea>
                                </div>
                                <hr class="hrStyleEdd">
                                <button class="btnDuplicate" [disabled]="!duplicateApplicationForm.valid">Duplicate</button>
                        </form>
                        <button class="btnClose" (click)="closeEditDuplicateDeletePopup()">Cancel</button>
                    </div>
                </div>
                <!-- duplicate popup End -->

                <!-- Delete popup Start -->
                <div class="delete-app-modal" *ngIf="teAppData.appid === deleteId && deleteFlag">
                    <div class="delete-modal-contents">
                        <label class="deleteAppHeading">
                            <p class="deleteIconAlign">
                                <img [src] ="deleteRedImagePath" alt="close Image" class="deleteIcon"/>
                            </p>                        
                            Do you want to delete this Application?
                        </label>
                        <div>
                            <p class="deleteInfo">Your datas within this item will be deleted and <br /> cannot be recovered.</p>
                        </div>
                        
                        <button class="btnDelete" (click)="deleteApplication(teAppData.appid)">Delete</button>
                        <button class="btnClose" (click)="closeEditDuplicateDeletePopup()">Cancel</button>
                    </div>
                </div>
                <!-- Delete popup End -->

            </div>
            
        </div>

        <!-- Create Application Popup Start -->
        <div class="create-app-modal">
            <div class="create-modal-contents">
        
                <div class="close">
                    <img class="closeModel" [src] ="closeImgPath" alt="close Image"  (click)="closeModal()" />
                </div>
                <form #createNewApplicationForm="ngForm" (submit)="createNewApplication(createNewApplicationForm)">
                        <p class="createAppHeading">Create new Application</p>
                        <hr class="hrStyle">
                        <div>
                            <label class="appDetails">Application Name</label>
                            <label *ngIf="uname.errors?.['minlength'] || (createNewApplicationForm.controls['appName']?.touched && createNewApplicationForm.controls['appName']?.invalid)" class="errorMessage">
                                Application Name must be at least 1 character long.
                            </label>
                            <label *ngIf="uname.errors?.['maxlength']" class="errorMessage">
                                Application Name maximum of 25 characters only.
                            </label><br />
                            <input class="inputStyles" id="name" type="text" name="appName" #uname="ngModel" 
                            placeholder="Enter Application Name" required ngModel maxlength="25" minlength="1" #appName />
                        </div>
                        <div>
                            <label class="appDetails">Project Name</label><br>
                            <select class="createProjectsDropdown" (change)="selected($event)">
                                <option value="">Select Project</option>
                                <option *ngFor="let teProjectsName of projectIdName" value={{teProjectsName.projectname}}>
                                    {{teProjectsName.projectname}}
                                </option>
                            </select>
                        </div>
                        <div class="control">
                            <label class="appDetails">Application Description</label><br />
                            <textarea type="text" name="appDescription" class="textareaStyles" id="Description" 
                            placeholder="Enter Application Description" ngModel maxlength="150" minlength="1" #appDescription > </textarea>
                        </div>
                        <hr class="hrStyle">
                        <button class="btnCreate" [disabled]="!createNewApplicationForm.valid">Create</button>
                </form>
                <button class="CreateProjBtnClose" (click)="closeModal()">Cancel</button>
            </div>
        </div>
        <!-- Create Application Popup End -->

    </div>

    <div class="appDataNotFound" *ngIf="!searchFlag">
        <p>Sorry, no applications were found for your selected project name <span style="color: #3E38D5;"> "{{selectedValueDisplay}}"</span>. </p>
    </div>

</section>